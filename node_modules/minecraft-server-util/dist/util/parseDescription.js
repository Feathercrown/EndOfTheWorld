"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Description_1 = __importDefault(require("../structure/Description"));
const colorCodes = {
    black: '0',
    dark_blue: '1',
    dark_green: '2',
    dark_aqua: '3',
    dark_red: '4',
    dark_purple: '5',
    gold: '6',
    gray: '7',
    dark_gray: '8',
    blue: '9',
    green: 'a',
    aqua: 'b',
    red: 'c',
    light_purple: 'd',
    yellow: 'e',
    white: 'f'
};
const formatCodes = {
    obfuscated: 'k',
    bold: 'l',
    strikethrough: 'm',
    underline: 'n',
    italic: 'o',
    reset: 'r'
};
/**
 * Parses the MOTD from the many formats that Minecraft uses into a {@see Description} class.
 * @param {Chat | string} description The raw MOTD provided by the server
 * @returns {Description} The formatted result of the description
 */
function parseDescription(description) {
    if (typeof description === 'string') {
        return new Description_1.default(description);
    }
    let result = '';
    if ('color' in description && typeof description.color !== 'undefined') {
        if (Object.prototype.hasOwnProperty.call(colorCodes, description.color)) {
            // @ts-ignore
            result += '\u00A7' + colorCodes[description.color];
        }
        else if (Object.prototype.hasOwnProperty.call(formatCodes, description.color)) {
            // @ts-ignore
            result += '\u00A7' + formatCodes[description.color];
        }
    }
    for (const prop in Object.getOwnPropertyNames(description)) {
        if (Object.prototype.hasOwnProperty.call(formatCodes, prop)) {
            // @ts-ignore
            result += '\u00A7' + formatCodes[prop];
        }
    }
    result += description.text || '';
    if (Object.prototype.hasOwnProperty.call(description, 'extra') && typeof description.extra !== 'undefined' && description.extra.constructor === Array) {
        for (let i = 0; i < description.extra.length; i++) {
            result += parseDescription(description.extra[i]);
        }
    }
    return new Description_1.default(result);
}
exports.default = parseDescription;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2VEZXNjcmlwdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3BhcnNlRGVzY3JpcHRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSwyRUFBbUQ7QUFHbkQsTUFBTSxVQUFVLEdBQUc7SUFDbEIsS0FBSyxFQUFFLEdBQUc7SUFDVixTQUFTLEVBQUUsR0FBRztJQUNkLFVBQVUsRUFBRSxHQUFHO0lBQ2YsU0FBUyxFQUFFLEdBQUc7SUFDZCxRQUFRLEVBQUUsR0FBRztJQUNiLFdBQVcsRUFBRSxHQUFHO0lBQ2hCLElBQUksRUFBRSxHQUFHO0lBQ1QsSUFBSSxFQUFFLEdBQUc7SUFDVCxTQUFTLEVBQUUsR0FBRztJQUNkLElBQUksRUFBRSxHQUFHO0lBQ1QsS0FBSyxFQUFFLEdBQUc7SUFDVixJQUFJLEVBQUUsR0FBRztJQUNULEdBQUcsRUFBRSxHQUFHO0lBQ1IsWUFBWSxFQUFFLEdBQUc7SUFDakIsTUFBTSxFQUFFLEdBQUc7SUFDWCxLQUFLLEVBQUUsR0FBRztDQUNWLENBQUM7QUFFRixNQUFNLFdBQVcsR0FBRztJQUNuQixVQUFVLEVBQUUsR0FBRztJQUNmLElBQUksRUFBRSxHQUFHO0lBQ1QsYUFBYSxFQUFFLEdBQUc7SUFDbEIsU0FBUyxFQUFFLEdBQUc7SUFDZCxNQUFNLEVBQUUsR0FBRztJQUNYLEtBQUssRUFBRSxHQUFHO0NBQ1YsQ0FBQztBQUVGOzs7O0dBSUc7QUFDSCxTQUFTLGdCQUFnQixDQUFDLFdBQTBCO0lBQ25ELElBQUksT0FBTyxXQUFXLEtBQUssUUFBUSxFQUFFO1FBQUUsT0FBTyxJQUFJLHFCQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7S0FBRTtJQUU3RSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7SUFFaEIsSUFBSSxPQUFPLElBQUksV0FBVyxJQUFJLE9BQU8sV0FBVyxDQUFDLEtBQUssS0FBSyxXQUFXLEVBQUU7UUFDdkUsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUN4RSxhQUFhO1lBQ2IsTUFBTSxJQUFJLFFBQVEsR0FBRyxVQUFVLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ25EO2FBQU0sSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNoRixhQUFhO1lBQ2IsTUFBTSxJQUFJLFFBQVEsR0FBRyxXQUFXLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ3BEO0tBQ0Q7SUFFRCxLQUFLLE1BQU0sSUFBSSxJQUFJLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsRUFBRTtRQUMzRCxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUU7WUFDNUQsYUFBYTtZQUNiLE1BQU0sSUFBSSxRQUFRLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ3ZDO0tBQ0Q7SUFFRCxNQUFNLElBQUksV0FBVyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7SUFFakMsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxJQUFJLE9BQU8sV0FBVyxDQUFDLEtBQUssS0FBSyxXQUFXLElBQUksV0FBVyxDQUFDLEtBQUssQ0FBQyxXQUFXLEtBQUssS0FBSyxFQUFFO1FBQ3RKLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNsRCxNQUFNLElBQUksZ0JBQWdCLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2pEO0tBQ0Q7SUFFRCxPQUFPLElBQUkscUJBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNoQyxDQUFDO0FBRUQsa0JBQWUsZ0JBQWdCLENBQUMifQ==